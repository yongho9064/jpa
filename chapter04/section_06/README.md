## 4.6 ê¸°ë³¸ í‚¤ ë§¤í•‘

ì§€ê¸ˆê¹Œì§€ ì˜ˆì œì—ì„œëŠ” `@Id` ì–´ë…¸í…Œì´ì…˜ë§Œ ì‚¬ìš©í•´ì„œ íšŒì›ì˜ ê¸°ë³¸ í‚¤ë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì§ì ‘ í• ë‹¹í–ˆë‹¤. ê¸°ë³¸ í‚¤ë¥¼ ì§ì ‘ í• ë‹¹í•˜ëŠ” ëŒ€ì‹ , ë°ì´í„°ë² ì´ìŠ¤ê°€ ìƒì„±í•´ì£¼ëŠ” ê°’ì„ ì‚¬ìš©í•˜ë ¤ë©´ ì–´ë–»ê²Œ ë§¤í•‘í•´ì•¼ í•˜ëŠ”ì§€ ì•Œì•„ë³´ìž.

ë°ì´í„°ë² ì´ìŠ¤ë§ˆë‹¤ ê¸°ë³¸ í‚¤ë¥¼ ìƒì„±í•˜ëŠ” ë°©ì‹ì´ ì„œë¡œ ë‹¤ë¥´ë¯€ë¡œ ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸°ëŠ” ì‰½ì§€ ì•Šë‹¤. JPAëŠ” ì´ëŸ° ë¬¸ì œë“¤ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ë°ì´í„°ë² ì´ìŠ¤ ê¸°ë³¸ í‚¤ ìƒì„± ì „ëžµì„ ì œê³µí•œë‹¤.

*   **ì§ì ‘ í• ë‹¹**: ê¸°ë³¸ í‚¤ë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì§ì ‘ í• ë‹¹í•œë‹¤.
*   **ìžë™ ìƒì„±**: ëŒ€ë¦¬ í‚¤(Surrogate Key) ì‚¬ìš© ë°©ì‹
    *   `IDENTITY`: ê¸°ë³¸ í‚¤ ìƒì„±ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ìœ„ìž„í•œë‹¤. (ì˜ˆ: MySQLì˜ `AUTO_INCREMENT`)
    *   `SEQUENCE`: ë°ì´í„°ë² ì´ìŠ¤ ì‹œí€€ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ë³¸ í‚¤ë¥¼ í• ë‹¹í•œë‹¤. (ì˜ˆ: Oracleì˜ `SEQUENCE`)
    *   `TABLE`: í‚¤ ìƒì„± ì „ìš© í…Œì´ë¸”ì„ ë§Œë“¤ì–´ ì‹œí€€ìŠ¤ì²˜ëŸ¼ ì‚¬ìš©í•œë‹¤.

ìžë™ ìƒì„± ì „ëžµì´ ë‹¤ì–‘í•œ ì´ìœ ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ë²¤ë”ë§ˆë‹¤ ì§€ì›í•˜ëŠ” ë°©ì‹ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì˜¤ë¼í´ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì‹œí€€ìŠ¤ë¥¼ ì œê³µí•˜ì§€ë§Œ, MySQLì€ ì‹œí€€ìŠ¤ë¥¼ ì œê³µí•˜ì§€ ì•Šê³  ëŒ€ì‹  `AUTO_INCREMENT` ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.

ë”°ë¼ì„œ `SEQUENCE`ë‚˜ `IDENTITY` ì „ëžµì€ ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì— ì˜ì¡´ì ì´ë‹¤. `TABLE` ì „ëžµì€ íŠ¹ì • ë°ì´í„°ë² ì´ìŠ¤ì— ì¢…ì†ë˜ì§€ ì•ŠëŠ”ë‹¤.

ê¸°ë³¸ í‚¤ë¥¼ ì§ì ‘ í• ë‹¹í•˜ë ¤ë©´ `@Id`ë§Œ ì‚¬ìš©í•˜ë©´ ë˜ê³ , ìžë™ ìƒì„± ì „ëžµì„ ì‚¬ìš©í•˜ë ¤ë©´ `@Id`ì™€ í•¨ê»˜ `@GeneratedValue` ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ê³  ì›í•˜ëŠ” í‚¤ ìƒì„± ì „ëžµì„ ì„ íƒí•˜ë©´ ëœë‹¤.

> #### **âš ï¸ ì£¼ì˜: `hibernate.id.new_generator_mappings`**
>
> í‚¤ ìƒì„± ì „ëžµì„ ì‚¬ìš©í•˜ë ¤ë©´ `persistence.xml`ì— `hibernate.id.new_generator_mappings=true` ì†ì„±ì„ ë°˜ë“œì‹œ ì¶”ê°€í•´ì•¼ í•œë‹¤. í•˜ì´ë²„ë„¤ì´íŠ¸ëŠ” ë” íš¨ê³¼ì ì´ê³  JPA ê·œê²©ì— ë§žëŠ” ìƒˆë¡œìš´ í‚¤ ìƒì„± ì „ëžµì„ ê°œë°œí–ˆì§€ë§Œ, ê³¼ê±° ë²„ì „ê³¼ì˜ í˜¸í™˜ì„±ì„ ìœ„í•´ ì´ ì˜µì…˜ì˜ ê¸°ë³¸ê°’ì„ `false`ë¡œ ìœ ì§€í•˜ê³  ìžˆë‹¤.
>
> ì´ ì˜µì…˜ì„ `true`ë¡œ ì„¤ì •í•˜ë©´ í‚¤ ìƒì„± ì„±ëŠ¥ì„ ìµœì í™”í•˜ëŠ” `allocationSize` ì†ì„±ì˜ ë™ìž‘ ë°©ì‹ì´ ë‹¬ë¼ì§„ë‹¤. `allocationSize`ëŠ” ë’¤ì—ì„œ ìžì„¸ížˆ ì„¤ëª…í•œë‹¤.
>
> ```xml
> <property name="hibernate.id.new_generator_mappings" value="true"/>
> ```

---

### 4.6.1 ê¸°ë³¸ í‚¤ ì§ì ‘ í• ë‹¹ ì „ëžµ

ê¸°ë³¸ í‚¤ë¥¼ ì§ì ‘ í• ë‹¹í•˜ë ¤ë©´ ì•„ëž˜ ì½”ë“œì™€ ê°™ì´ `@Id`ë¡œ ë§¤í•‘í•˜ë©´ ëœë‹¤.

```java
@Id
@Column(name = "id")
private String id;
```

`@Id` ì ìš©ì´ ê°€ëŠ¥í•œ ìžë°” íƒ€ìž…ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

*   ìžë°” ê¸°ë³¸í˜• (`int`, `long`, ...)
*   ìžë°” ëž˜í¼í˜• (`Integer`, `Long`, ...)
*   `String`
*   `java.util.Date`
*   `java.sql.Date`
*   `java.math.BigDecimal`
*   `java.math.BigInteger`

ì´ ì „ëžµì€ `em.persist()`ë¡œ ì—”í‹°í‹°ë¥¼ ì €ìž¥í•˜ê¸° ì „ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ê¸°ë³¸ í‚¤ë¥¼ ì§ì ‘ í• ë‹¹í•˜ëŠ” ë°©ì‹ì´ë‹¤.

```java
Board board = new Board();
board.setId("id1");  // ê¸°ë³¸ í‚¤ ì§ì ‘ í• ë‹¹
em.persist(board);
```

> #### **ðŸ’¡ ì°¸ê³ **
>
> ê¸°ë³¸ í‚¤ ì§ì ‘ í• ë‹¹ ì „ëžµì—ì„œ ì‹ë³„ìž ê°’ ì—†ì´ ì €ìž¥í•˜ë©´ ì˜ˆì™¸ê°€ ë°œìƒí•˜ëŠ”ë°, ì–´ë–¤ ì˜ˆì™¸ê°€ ë°œìƒí•˜ëŠ”ì§€ëŠ” JPA í‘œì¤€ì— ì •ì˜ë˜ì–´ ìžˆì§€ ì•Šë‹¤. í•˜ì´ë²„ë„¤ì´íŠ¸ êµ¬í˜„ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ JPA ìµœìƒìœ„ ì˜ˆì™¸ì¸ `javax.persistence.PersistenceException`ì´ ë°œìƒí•˜ë©°, ë‚´ë¶€ì ìœ¼ë¡œëŠ” í•˜ì´ë²„ë„¤ì´íŠ¸ì˜ `org.hibernate.id.IdentifierGenerationException` ì˜ˆì™¸ë¥¼ í¬í•¨í•˜ê³  ìžˆë‹¤.

---

### 4.6.2 IDENTITY ì „ëžµ

`IDENTITY`ëŠ” ê¸°ë³¸ í‚¤ ìƒì„±ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ìœ„ìž„í•˜ëŠ” ì „ëžµì´ë‹¤. ì£¼ë¡œ **MySQL, PostgreSQL, SQL Server, DB2**ì—ì„œ ì‚¬ìš©í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ MySQLì˜ `AUTO_INCREMENT` ê¸°ëŠ¥ì´ ëŒ€í‘œì ì´ë‹¤.

```sql
-- MySQLì˜ AUTO_INCREMENT ì˜ˆì œ DDL
CREATE TABLE BOARD (
    ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    DATA VARCHAR(255)
);

INSERT INTO BOARD(DATA) VALUES ('A');
INSERT INTO BOARD(DATA) VALUES ('B');
```

í…Œì´ë¸” ìƒì„± ì‹œ ê¸°ë³¸ í‚¤ ì»¬ëŸ¼ì¸ `ID`ì— `AUTO_INCREMENT`ë¥¼ ì¶”ê°€í•˜ë©´, ë°ì´í„°ë² ì´ìŠ¤ì— ê°’ì„ ì €ìž¥í•  ë•Œ ID ì»¬ëŸ¼ì„ ë¹„ì›Œë‘ì–´ë„ ë°ì´í„°ë² ì´ìŠ¤ê°€ ìˆœì„œëŒ€ë¡œ ê°’ì„ ì±„ì›Œì¤€ë‹¤. `IDENTITY` ì „ëžµì€ ì´ì²˜ëŸ¼ ë°ì´í„°ë² ì´ìŠ¤ì— ê°’ì„ ì €ìž¥í•˜ê³  ë‚˜ì„œì•¼ ê¸°ë³¸ í‚¤ ê°’ì„ êµ¬í•  ìˆ˜ ìžˆì„ ë•Œ ì‚¬ìš©í•œë‹¤.

ë§¤í•‘ì€ `@GeneratedValue`ì˜ `strategy` ì†ì„± ê°’ì„ `GenerationType.IDENTITY`ë¡œ ì§€ì •í•˜ë©´ ëœë‹¤.

**ì˜ˆì œ 4.9: IDENTITY ë§¤í•‘ ì½”ë“œ**
```java
@Entity
public class Board {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    //...
}
```

**ì˜ˆì œ 4.10: IDENTITY ì‚¬ìš© ì½”ë“œ**
```java
private static void logic(EntityManager em) {
    Board board = new Board();
    em.persist(board);
    // board.id = 1
    System.out.println("board.getId() = " + board.getId());
}
```

ìœ„ ì˜ˆì œì—ì„œ `em.persist()`ë¥¼ í˜¸ì¶œí•˜ì—¬ ì—”í‹°í‹°ë¥¼ ì €ìž¥í•œ ì§í›„, í• ë‹¹ëœ ì‹ë³„ìž ê°’ì„ ì¶œë ¥í–ˆë‹¤. ì¶œë ¥ëœ ê°’ `1`ì€ ì €ìž¥ ì‹œì ì— ë°ì´í„°ë² ì´ìŠ¤ê°€ ìƒì„±í•œ ê°’ì„ JPAê°€ ì¡°íšŒí•œ ê²ƒì´ë‹¤.

> #### **âš ï¸ ì£¼ì˜: IDENTITY ì „ëžµê³¼ ì“°ê¸° ì§€ì—°**
>
> ì—”í‹°í‹°ê°€ ì˜ì† ìƒíƒœê°€ ë˜ë ¤ë©´ ì‹ë³„ìžê°€ ë°˜ë“œì‹œ í•„ìš”í•˜ë‹¤. ê·¸ëŸ°ë° `IDENTITY` ì „ëžµì€ ì—”í‹°í‹°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— **ì €ìž¥í•´ì•¼ë§Œ** ì‹ë³„ìžë¥¼ êµ¬í•  ìˆ˜ ìžˆë‹¤. ì´ ë•Œë¬¸ì— `em.persist()`ë¥¼ í˜¸ì¶œí•˜ëŠ” ì¦‰ì‹œ `INSERT` SQLì´ ë°ì´í„°ë² ì´ìŠ¤ì— ì „ë‹¬ëœë‹¤. ê²°ê³¼ì ìœ¼ë¡œ, ì´ ì „ëžµì€ **íŠ¸ëžœìž­ì…˜ì„ ì§€ì›í•˜ëŠ” ì“°ê¸° ì§€ì—°ì´ ë™ìž‘í•˜ì§€ ì•ŠëŠ”ë‹¤.**

> #### **ðŸ’¡ ì°¸ê³ : IDENTITY ì „ëžµê³¼ ìµœì í™”**
>
> `IDENTITY` ì „ëžµì€ ë°ì´í„°ë¥¼ `INSERT`í•œ í›„ì— ê¸°ë³¸ í‚¤ ê°’ì„ ì¡°íšŒí•´ì•¼ í•˜ë¯€ë¡œ, JPAëŠ” ì¶”ê°€ë¡œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì¡°íšŒí•´ì•¼ í•œë‹¤. í•˜ì§€ë§Œ JDBC 3ì— ì¶”ê°€ëœ `Statement.getGeneratedKeys()`ë¥¼ ì‚¬ìš©í•˜ë©´ ë°ì´í„°ë¥¼ ì €ìž¥í•˜ë©´ì„œ ë™ì‹œì— ìƒì„±ëœ ê¸°ë³¸ í‚¤ ê°’ì„ ì–»ì–´ì˜¬ ìˆ˜ ìžˆë‹¤. í•˜ì´ë²„ë„¤ì´íŠ¸ëŠ” ì´ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì™€ í•œ ë²ˆë§Œ í†µì‹ í•˜ë„ë¡ ìµœì í™”í•œë‹¤.

---

### 4.6.3 SEQUENCE ì „ëžµ

ë°ì´í„°ë² ì´ìŠ¤ ì‹œí€€ìŠ¤ëŠ” ìœ ì¼í•œ ê°’ì„ ìˆœì„œëŒ€ë¡œ ìƒì„±í•˜ëŠ” íŠ¹ë³„í•œ ë°ì´í„°ë² ì´ìŠ¤ ì˜¤ë¸Œì íŠ¸ë‹¤. `SEQUENCE` ì „ëžµì€ ì´ ì‹œí€€ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ë³¸ í‚¤ë¥¼ ìƒì„±í•œë‹¤. ì´ ì „ëžµì€ ì‹œí€€ìŠ¤ë¥¼ ì§€ì›í•˜ëŠ” **Oracle, PostgreSQL, DB2, H2** ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.

**ì˜ˆì œ 4.11: ì‹œí€€ìŠ¤ DDL**
```sql
CREATE TABLE BOARD (
  ID BIGINT NOT NULL PRIMARY KEY,
  DATA VARCHAR(255)
);

-- ì‹œí€€ìŠ¤ ìƒì„±
CREATE SEQUENCE BOARD_SEQ START WITH 1 INCREMENT BY 1;
```

**ì˜ˆì œ 4.12: ì‹œí€€ìŠ¤ ë§¤í•‘ ì½”ë“œ**
```java
@Entity
@SequenceGenerator(
    name = "BOARD_SEQ_GENERATOR",
    sequenceName = "BOARD_SEQ", // ë§¤í•‘í•  ë°ì´í„°ë² ì´ìŠ¤ ì‹œí€€ìŠ¤ ì´ë¦„
    initialValue = 1,
    allocationSize = 1
)
public class Board {

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE,
                    generator = "BOARD_SEQ_GENERATOR")
    private Long id;
    //...
}
```

ìœ„ ì˜ˆì œì—ì„œëŠ” `@SequenceGenerator`ë¥¼ ì‚¬ìš©í•˜ì—¬ `BOARD_SEQ_GENERATOR`ë¼ëŠ” ì´ë¦„ì˜ ì‹œí€€ìŠ¤ ìƒì„±ê¸°ë¥¼ ë“±ë¡í–ˆë‹¤. `sequenceName` ì†ì„±ìœ¼ë¡œ `BOARD_SEQ`ë¥¼ ì§€ì •í•˜ì—¬, JPAê°€ ì´ ì‹œí€€ìŠ¤ ìƒì„±ê¸°ë¥¼ ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì˜ `BOARD_SEQ` ì‹œí€€ìŠ¤ì™€ ë§¤í•‘í•˜ë„ë¡ í–ˆë‹¤.

ê·¸ í›„ `@GeneratedValue`ì˜ `strategy`ë¥¼ `GenerationType.SEQUENCE`ë¡œ ì„¤ì •í•˜ê³ , `generator` ì†ì„±ìœ¼ë¡œ ë°©ê¸ˆ ë“±ë¡í•œ ì‹œí€€ìŠ¤ ìƒì„±ê¸°ë¥¼ ì„ íƒí–ˆë‹¤. ì´ì œ `id` ì‹ë³„ìž ê°’ì€ `BOARD_SEQ_GENERATOR`ê°€ í• ë‹¹í•œë‹¤.

**ì˜ˆì œ 4.13: SEQUENCE ì‚¬ìš© ì½”ë“œ**
```java
private static void logic(EntityManager em) {
    Board board = new Board();
    em.persist(board);
    // board.id = 1
    System.out.println("board.getId() = " + board.getId());
}
```

ìœ„ ì½”ë“œëŠ” `IDENTITY` ì „ëžµê³¼ ê°™ì•„ ë³´ì´ì§€ë§Œ, ë‚´ë¶€ ë™ìž‘ ë°©ì‹ì€ ë‹¤ë¥´ë‹¤.

*   **`SEQUENCE` ì „ëžµ**: `em.persist()` í˜¸ì¶œ ì‹œ, ë¨¼ì € ë°ì´í„°ë² ì´ìŠ¤ ì‹œí€€ìŠ¤ë¥¼ ì‚¬ìš©í•´ ì‹ë³„ìžë¥¼ ì¡°íšŒí•˜ê³ , ì—”í‹°í‹°ì— í• ë‹¹í•œ í›„ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ìž¥í•œë‹¤. `INSERT` SQLì€ íŠ¸ëžœìž­ì…˜ ì»¤ë°‹ ì‹œì ì— ì‹¤í–‰ëœë‹¤. (ì“°ê¸° ì§€ì—°ì´ ê°€ëŠ¥í•˜ë‹¤)
*   **`IDENTITY` ì „ëžµ**: `em.persist()` í˜¸ì¶œ ì‹œ, ë¨¼ì € ì—”í‹°í‹°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ìž¥í•œ í›„, ìƒì„±ëœ ì‹ë³„ìžë¥¼ ì¡°íšŒí•˜ì—¬ ì—”í‹°í‹°ì— í• ë‹¹í•œë‹¤. (ì“°ê¸° ì§€ì—°ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤)

#### @SequenceGenerator ì†ì„±

| ì†ì„± | ì„¤ëª… | ê¸°ë³¸ê°’ |
| :--- | :--- | :--- |
| `name` | ì‹ë³„ìž ìƒì„±ê¸° ì´ë¦„ (í•„ìˆ˜) | **í•„ìˆ˜** |
| `sequenceName` | ë°ì´í„°ë² ì´ìŠ¤ì— ë“±ë¡ëœ ì‹œí€€ìŠ¤ ì´ë¦„ | `hibernate_sequence` |
| `initialValue` | DDL ìƒì„± ì‹œì—ë§Œ ì‚¬ìš©ë¨. ì‹œí€€ìŠ¤ ì‹œìž‘ ê°’. | 1 |
| `allocationSize`| ì‹œí€€ìŠ¤ í•œ ë²ˆ í˜¸ì¶œì— ì¦ê°€í•˜ëŠ” ìˆ˜ (ì„±ëŠ¥ ìµœì í™”ìš©) | 50 |
| `catalog`, `schema`| ë°ì´í„°ë² ì´ìŠ¤ catalog, schema ì´ë¦„ | |

ë§¤í•‘ì— ë”°ë¥¸ DDL ìƒì„± ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.
```sql
create sequence [sequenceName] start with [initialValue] increment by [allocationSize];
```

> #### **âš ï¸ ì£¼ì˜: `allocationSize`ì˜ ê¸°ë³¸ê°’**
>
> `SequenceGenerator.allocationSize`ì˜ ê¸°ë³¸ê°’ì€ `50`ì´ë‹¤. ì´ ë•Œë¬¸ì— JPAê°€ ìžë™ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì‹œí€€ìŠ¤ëŠ” `increment by 50`ìœ¼ë¡œ ì„¤ì •ëœë‹¤. ì¦‰, ì‹œí€€ìŠ¤ë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ê°’ì´ 50ì”© ì¦ê°€í•œë‹¤. ë°ì´í„°ë² ì´ìŠ¤ ì‹œí€€ìŠ¤ì˜ ì¦ê°€ ê°’ì´ `1`ì´ë¼ë©´, **ë°˜ë“œì‹œ `allocationSize`ë¥¼ `1`ë¡œ ì„¤ì •í•´ì•¼ í•œë‹¤.**

> #### **ðŸ’¡ ì°¸ê³ : SEQUENCE ì „ëžµê³¼ ìµœì í™” (`allocationSize`)**
>
> `SEQUENCE` ì „ëžµì€ ì‹ë³„ìžë¥¼ ì–»ê¸° ìœ„í•´ ë°ì´í„°ë² ì´ìŠ¤ì™€ ì¶”ê°€ í†µì‹ ì´ í•„ìš”í•˜ë‹¤.
>
> 1.  ì‹ë³„ìžë¥¼ êµ¬í•˜ê¸° ìœ„í•´ ë°ì´í„°ë² ì´ìŠ¤ ì‹œí€€ìŠ¤ ì¡°íšŒ (ì˜ˆ: `SELECT BOARD_SEQ.NEXTVAL FROM DUAL`)
> 2.  ì¡°íšŒí•œ ì‹œí€€ìŠ¤ ê°’ì„ ê¸°ë³¸ í‚¤ë¡œ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° `INSERT`
>
> JPAëŠ” `@SequenceGenerator.allocationSize`ë¥¼ ì‚¬ìš©í•´ ì‹œí€€ìŠ¤ ì ‘ê·¼ íšŸìˆ˜ë¥¼ ì¤„ì—¬ ì„±ëŠ¥ì„ ìµœì í™”í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `allocationSize`ê°€ `50`ì´ë©´, JPAëŠ” ì‹œí€€ìŠ¤ë¥¼ í•œ ë²ˆ í˜¸ì¶œí•˜ì—¬ ê°’ì„ 50ë§Œí¼ ì¦ê°€ì‹œí‚¤ê³ (ì˜ˆ: 1 â†’ 51), `1`ë¶€í„° `50`ê¹Œì§€ì˜ ê°’ì„ ë©”ëª¨ë¦¬ì— í• ë‹¹í•´ ìˆœì°¨ì ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤. 51ë²ˆì§¸ IDê°€ í•„ìš”í•˜ë©´ ë‹¤ì‹œ ì‹œí€€ìŠ¤ë¥¼ í˜¸ì¶œí•˜ì—¬ ê°’ì„ 101ë¡œ ì¦ê°€ì‹œí‚¤ê³ , `51`ë¶€í„° `100`ê¹Œì§€ ë©”ëª¨ë¦¬ì—ì„œ ì‚¬ìš©í•œë‹¤.
>
> ì´ ìµœì í™” ë°©ë²•ì€ ì‹œí€€ìŠ¤ ê°’ì„ ë¯¸ë¦¬ ì„ ì í•˜ë¯€ë¡œ ì—¬ëŸ¬ JVMì´ ë™ì‹œì— ë™ìž‘í•´ë„ ê¸°ë³¸ í‚¤ ê°’ì´ ì¶©ëŒí•˜ì§€ ì•ŠëŠ” ìž¥ì ì´ ìžˆë‹¤. ë°˜ë©´, ë°ì´í„°ë² ì´ìŠ¤ì— ì§ì ‘ ì ‘ê·¼í•´ì„œ ë°ì´í„°ë¥¼ ë“±ë¡í•  ë•ŒëŠ” ì‹œí€€ìŠ¤ ê°’ì´ í•œ ë²ˆì— ë§Žì´ ì¦ê°€í•œ ê²ƒì²˜ëŸ¼ ë³´ì¼ ìˆ˜ ìžˆë‹¤. ë§Œì•½ INSERT ì„±ëŠ¥ì´ í¬ê²Œ ì¤‘ìš”í•˜ì§€ ì•Šë‹¤ë©´ `allocationSize`ë¥¼ `1`ë¡œ ì„¤ì •í•˜ë©´ ëœë‹¤.
>
> ì´ ìµœì í™” ë°©ë²•ì€ ì•žì„œ ì„¤ëª…í•œ `hibernate.id.new_generator_mappings` ì†ì„±ì„ `true`ë¡œ ì„¤ì •í•´ì•¼ ì œëŒ€ë¡œ ë™ìž‘í•œë‹¤.
>
> `false`ì¼ ê²½ìš°(ê³¼ê±° ë°©ì‹): `allocationSize`ê°€ 50ì´ë©´, ì‹œí€€ìŠ¤ì—ì„œ `1`ì„ ë°›ì•„ì˜¤ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ `1`ë¶€í„°`50`ê¹Œì§€ ì‚¬ìš©í•˜ê³ , ë‹¤ìŒìœ¼ë¡œ ì‹œí€€ìŠ¤ì—ì„œ `2`ë¥¼ ë°›ì•„ì˜¤ë©´ `51`ë¶€í„°`100`ê¹Œì§€ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ì—ˆë‹¤.

> #### **ðŸ’¡ ì°¸ê³ **
>
> `@SequenceGenerator`ëŠ” ë‹¤ìŒê³¼ ê°™ì´ `@GeneratedValue` ë°”ë¡œ ì˜†ì— í•¨ê»˜ ì„ ì–¸í•  ìˆ˜ë„ ìžˆë‹¤.
> ```java
> @Entity
> public class Board {
>     @Id
>     @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "...")
>     @SequenceGenerator(name = "...", sequenceName = "...", ...)
>     private Long id;
> }
> ```

### 4.6.4 TABLE ì „ëžµ
